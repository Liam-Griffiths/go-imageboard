{{ define "content" }}
<style>
  @media (max-width: 768px) {
    body {
      font-size: 14px;
      padding: 5px;
    }

    .container {
      max-width: 100%;
      padding: 0;
    }

    .post {
      padding: 8px;
      margin-bottom: 8px;
    }

    .post-info {
      font-size: 12px;
      margin-bottom: 8px;
    }

    .post-content {
      font-size: 14px;
      line-height: 1.4;
    }

    .post-image {
      max-width: 100px;
      max-height: 100px;
      margin-right: 10px;
    }

    /* Improve touch targets */
    .board-nav a, .post-info a {
      padding: 5px;
      display: inline-block;
    }
  }
</style>
<div>
  <!-- Thread Header -->
  <div style="margin-bottom: 5px;">
    <span style="font-size: 12pt; color: #800000;">{{ .Thread.Title }}</span>
  </div>

  <div class="board-nav">
    [<a href="/">Home</a>]
    [<a href="/{{ .Board.Slug }}">{{ .Board.Name }}</a>]
    [<a href="/{{ .Board.Slug }}/catalog">Catalog</a>]
    {{ if .IsAdmin }}
    <form action="/admin/delete-thread" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this thread?');">
      <input type="hidden" name="thread_id" value="{{ .Thread.ID }}">
      <button type="submit" class="delete-btn" style="color: red; background: none; border: none; cursor: pointer; font-size: 12px;">Delete Thread</button>
    </form>
    {{ end }}
  </div>

  <!-- Posts List -->
  <div class="thread">
    {{ range .Posts }}
    <div class="post" id="post-{{ .ID }}">
      <div class="post-info">
        Anonymous 
        {{ if .UserID }}
        <span class="user-id" style="color: #117743; font-weight: bold;">(ID: {{ .UserID }})</span>
        {{ end }}
        {{ if .CountryCode }}
        <span class="country-code">({{ .CountryCode }})</span>
        {{ end }}
        <span class="post-date">{{ formatTime .CreatedAt }}</span>
        <span class="post-num">No.{{ .ID }}</span>
        [<a href="#post-{{ .ID }}">Link</a>]
        {{ if $.IsAdmin }}
        <form action="/admin/delete-post" method="post" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this post?');">
          <input type="hidden" name="post_id" value="{{ .ID }}">
          <input type="hidden" name="thread_id" value="{{ .ThreadID }}">
          <button type="submit" class="delete-btn" style="color: red; background: none; border: none; cursor: pointer; font-size: 12px;">Delete</button>
        </form>
        {{ end }}
      </div>

      {{ if .ImagePath }}
      <div class="file-info">
        <b>File:</b> {{ .ImagePath }}
      </div>
      <div>
        <a href="/images/{{ .ImagePath }}" target="_blank">
          <img src="/images/{{ .ImagePath }}" alt="Posted image" class="post-image">
        </a>
      </div>
      {{ end }}

      <div class="post-content">
        {{ .Content }}
      </div>
      <div class="clear"></div>
    </div>
    {{ end }}
  </div>

  <hr class="hr">

  <!-- Reply Form -->
  <div class="form-box">
    <form action="/new-post" method="post" enctype="multipart/form-data" style="display: flex; flex-direction: column;">
      <input type="hidden" name="thread_id" value="{{ .Thread.ID }}">

      <div style="margin-bottom: 10px;">
        <label class="form-label" style="display: block; margin-bottom: 5px;">Name</label>
        <input type="text" name="name" value="Anonymous" disabled style="width: 100%; box-sizing: border-box;">
      </div>

      <div style="margin-bottom: 10px;">
        <label class="form-label" style="display: block; margin-bottom: 5px;">Comment</label>
        <textarea id="content" name="content" rows="4" required style="width: 100%; box-sizing: border-box;"></textarea>
      </div>

      <div style="margin-bottom: 10px;">
        <label class="form-label" style="display: block; margin-bottom: 5px;">File</label>
        <input type="file" id="image" name="image" accept="image/*" style="width: 100%;">
      </div>

      <div style="margin-bottom: 10px;">
        <label class="form-label" style="display: block; margin-bottom: 5px;">Verification</label>
        <div class="g-recaptcha" data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></div>
      </div>

      <div style="margin-top: 10px;">
        <input type="submit" value="Post Reply" class="submit-btn" style="padding: 8px 12px;">
      </div>
    </form>
  </div>

  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <hr class="hr">

  <div class="board-nav">
    [<a href="/">Home</a>]
    [<a href="/{{ .Board.Slug }}">{{ .Board.Name }}</a>]
    [<a href="/{{ .Board.Slug }}/catalog">Catalog</a>]
  </div>
</div>
{{ end }}
